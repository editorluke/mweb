# 原型相关

可看视频http://www.imooc.com/learn/277

```
function Person(name, age) {
    this.name = name
    this.age = age
}
<!-- more -->
Person.prototype.LEGS_NUM = 2
Person.prototype.ARMS_NUM = 2
Person.prototype.walk = function() {
    console.log(this.name + "is walking...")
}
Person.prototype.hi = function() {
    console.log("Hi, my name is" + this.name + ", I'm " + this.age + " years old.")
}

function Student(name, age, className) {
    Person.call(this, name, age)
    this.className = className
}

Student.prototype = Object.create(Person.prototype)
// 创建空对象，Student的原型指向Person的原型，继承了Person，同时Student的方法不影响Person
Student.prototype.contructor = Student
// 不设置的话，constructor会指向Person

Student.prototype.hi = function() {
    console.log("Hi, my name is" + this.name + ", I'm " + this.age + "years old, and from " + this.className + ".")
} 

Student.prototype.learn = function(subject) {
    console.log(this.name + 'is learning ' + subject + ' at ' + this.className + '.')
}

var bosn = new Student('Bosn', 27, 'Class 3, Grade 2')
bosn.hi()
bosn.LEGS_NUM
bosn.walk()
bosn.learn('math')

```

* 可用Object.getPrototypeOf(obj)来查找obj的原型
* 修改prototype的属性，会影响已创建或新创建的实例
* 修改prototype，赋值为新对象的话，不会影响已创建的，但会影响新创建的实例

实现一个探测器


```
!function(global) {
    function DetectorBase(configs) {
        if (!this instanceof DetectorBase) {
            throw new Error('Do not invoke without new.')
        }
        this.configs = configs
        this.analyze()
    }

    DetectorBase.prototype.detect = function() {
        throw new Error('Not implemented')
    }

    DetectorBase.prototype.analyze = function() {
        console.log('analyzing...')
        this.data = '###data###'
    }

    function LinkDetector(links) {
        if (!this instanceof LinkDetector) {
            throw new Error('Do not invoke without new.')
        }
        this.links = links
        DetectorBase.apply(this, arguments)
    }

    function ContainerDetector(containers) {
        if (!this instanceof ContainerDetector) {
            throw new Error('Do not invoke without new.')
        }
        this.containers = containers
        DetectorBase.apply(this, arguments)
    }

    inherit(LinkDetector, DetectorBase)
    inherit(ContainerDetector, DetectorBase)

    LinkDetector.prototype.detect = function() {
        console.log('Loading data:' + this.data)
        console.log('Link detection started.')
        console.log('Scaning links:' + this.links)
    }

    ContainerDetector.prototype.detect = function() {
        console.log('Loading data:' + this.data)
        console.log('Container detection started.')
        console.log('Scaning containers:' + this.containers)
    }

    Object.freeze(DetectorBase)
    Object.freeze(DetectorBase.prototype)
    Object.freeze(LinkDetector)
    Object.freeze(LinkDetector.prototype)
    Object.freeze(ContainerDetector)
    Object.freeze(ContainerDetector.prototype)

    Object.defineProperties(global, {
        DetectorBase: { value: DetectorBase },
        LinkDetector: { value: LinkDetector },
        ContainerDetector: { value: ContainerDetector }
    })

    function inherit(subClass, superClass) {
        subClass.prototype = Object.create(superClass.prototype)
        subClass.prototype.constructor = subClass
    }
}(this)

var cd = new ContainerDetector('#abc #def #ghi')
var ld = new LinkDetector('taobao.com tmal.com baidu.com')

cd.detect()
ld.detect()

```



